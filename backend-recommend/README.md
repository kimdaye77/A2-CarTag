# 추천 알고리즘 프로그램
실제 판매 견적들과 현재 선택완료된 견적을 비교하여 유사 견적을 추천해주는 알고리즘을 구현하였습니다.
현재 알고리즘은 가장 기본적인 연관분석 기법을 적용하기 위해 A-Priori 알고리즘을 이용하였습니다.
<br/> 유사도 판단의 기준은 아래와 같습니다.
1. 동일한 트림에서 모델타입(파워트레인, 바디타입, 구동방식)은 사용자가 변경을 결정할 가능성이 적으므로 해당 부분들이 동일한 견적에 대해서만 계산을 진행합니다.
2. 현재 선택한 추가옵션 리스트와 비교하여 어떠한 set이 존재할 때 다른 item or set이 존재할 가능성(confidence)를 높은 순으로 나열하여 상위 4개를 추립니다.
3. 이때 antecedent + consequent가 모두 자신이 선택한 추가옵션 안에 포함된다면 추천에서 제외하게 됩니다.
4. A-Priori 알고리즘의 threshold는 0.05로 잡았고, confidence는 0.05 이상인 데이터들만 추출하였습니다.

> 알고리즘은 추천 알고리즘으로 가장 기본적이라 할 수 있는 상관분석 기법과 연관분석 기법을 모두 적용해보고자 노력했으나, 임의로 만든 데이터의 한계로 상관분석 기법을 적용하기엔 각 아이템 사이의 연관관계가 너무 적게 나오는(우연적 관계 수준으로) 문제가 존재하였습니다. 
> 따라서 이 부분을 이용하기엔 추천의 신뢰도가 낮다고 판단하여 적용하지 않게 되었습니다.

## 파일 설명(데이터 생성 부분)

### createData.py
실제 판매견적 데이터가 존재하지 않아 Dummy Data를 만들어줄 코드입니다.
해당 파일의 결과로 아래와 같이 나옵니다.

salesData.csv

| history_id | PowerTrain | BodyType | Operation | CarOptionList | count |
|------------|----|----------|-----------|---------------|-------|
| 1          | 1  | 3        | 5         |               | 70    |
| 2          | 1  | 3        | 6         |               | 75    |
| 3          | 1  | 4        | 5         |               | 80    |
| 4          | 1  | 5        | 6         |               | 77    |


<br/>

### csvForDB.py
createData 코드에서 생성된 파일을 이용하여 Cartag서비스의 DB에 저장할 수 있도록 csv 파일을 생성합니다.
SalesHistory 테이블과 SalesModelMapper 테이블에 코드의 결과로 나온 csv파일을 Bulk Insert하게 됩니다.

saleHistory.csv

| history_id | car_id | sold_count | sold_options_id |
|------------|----|----------|-----------|
|9|1|72|1|
|10|1|85|1|
|139|1|159|1,3|

saleModelMapper.csv

| history_model_mapper_id | model_id | history_id |
|------------|----|----------|
|0|1|1|
|1|3|1|
|2|5|1|

-------------

## 파일 설명(알고리즘 부분)

.. 파일 완료 후 추가 예정